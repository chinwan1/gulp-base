<!DOCTYPE html>
<html>
  <head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0;">
    <!--[htmlclean-protect]-->
    <!-- inject:css -->
    <!-- endinject -->
    <!--[/htmlclean-protect]-->
  </head>
  <body>
		<iframe id="iframe_B"  src="/preview.html" width="80%"  height="500px" onload="registerEvent(event)"></iframe>
    <!--[htmlclean-protect]-->
    <!-- inject:js -->
    <!-- endinject -->
    <!--[/htmlclean-protect]-->
		<div onclick="onChangeColor('red')">Red</div><div div onclick="onChangeColor('#7CFC00')" >Green</div>
		<div onclick="testEvent('OPEN_MODAL')">Open</div>
		<div onclick="testEvent('CLOSED_MODAL')">Close</div>
		<div onclick="testMessage('CLOSED_MODAL')">TestMessage</div>
		<div onclick="testOpenIconCookie('OPEN_ICON_COOKIE')">OPEN_ICON_COOKIE</div>
		<div onclick="testOpenFooterCookie('OPEN_FOOTER')">OPEN_FOOTER</div>
	<script>
		var innerDoc = null;
		tempData = {
			color: '',
		}

		function setCardTitleColor(innerDoc,color) {
			var boxsTitle = innerDoc.querySelectorAll('.fd924-text-title-card')
			if(boxsTitle && boxsTitle.length) boxsTitle.forEach((node) =>{ node.style.color = tempData.color; })
		}
		function setCardSubTitleColor(innerDoc,color) {
			var boxsSubTitle = innerDoc.querySelectorAll('.fd924-detail')
			if(boxsSubTitle && boxsSubTitle.length) boxsSubTitle.forEach((node) =>{ node.style.color = tempData.color; })
		}
		function testEvent(action) {
			const myEvent = new CustomEvent("EventPreview", { bubbles: true, detail: { action }});
			innerDoc.dispatchEvent(myEvent);
		}
		function setBtnRejctColor(innerDoc,bgColor, textColor) {
			var btnRight = innerDoc.querySelector('.fd924-btn-right')
			btnRight.style.color = textColor;
			btnRight.style.background = bgColor;
		}
		function setBtnConfirmColor(innerDoc,bgColor, textColor) {
			var btnLeft = innerDoc.querySelector('.fd924-btn-left')
			btnLeft.style.color = textColor;
			btnLeft.style.background = bgColor;
		}
		function setModalTitleCardColor(innerDoc,color) {
			innerDoc.querySelector('.fd924-text-title-header').style.color = color;
		}
		function setModalSubTitleCardColor(innerDoc,color) {
			innerDoc.querySelector('.fd924-text-privacy-text').style.color = color;
		}
		function setModalPowerByColor(innerDoc,color) {
			innerDoc.querySelector('.fd924-powerd-by').style.color = color;
		}
		function setModalPowerByLinekColor(innerDoc,color) {
			innerDoc.querySelector('.fd924-powerd-link').style.color = color;
		}
		function setPrivacySettingText(message) {
			innerDoc.querySelector('.fd924-setting').innerText = message;
		}
		function setPrivacySettingButtonText(message) {
			innerDoc.querySelector('.fd924-text-ok').innerText = message;
		}
		function setPolicyText(message) {
			innerDoc.querySelector('.fd924-text-privary').innerText = message;
		}

		function setInitModalBox(data) {
			const myEvent = new CustomEvent("EventPreview", { bubbles: true, detail: { action: 'INIT_TOKEN', data  }});
			innerDoc.dispatchEvent(myEvent);
		}
		function testOpenIconCookie() {
			const myEvent = new CustomEvent("EventPreview", { bubbles: true, detail: { action: 'OPEN_ICON_COOKIE'  }});
			innerDoc.dispatchEvent(myEvent);
		}
		function testOpenFooterCookie() {
			const myEvent = new CustomEvent("EventPreview", { bubbles: true, detail: { action: 'OPEN_FOOTER'  }});
			innerDoc.dispatchEvent(myEvent);
		}
		function testMessage(message) {
			setPrivacySettingText(message);
			setPrivacySettingButtonText(message);
			setPolicyText(message);
		}
		function registerEvent(e) {
			var iframe = document.querySelector("#iframe_B");
			innerDoc = iframe.contentDocument || iframe.contentWindow.document;
			innerDoc.addEventListener("eventModel", (e) => {
				setTimeout(() => {
					setCardTitleColor(innerDoc,tempData.color);
					setCardSubTitleColor(innerDoc,tempData.color);
					setBtnRejctColor(innerDoc,tempData.color,tempData.color);
					setBtnConfirmColor(innerDoc,tempData.color,tempData.color);
					setModalTitleCardColor(innerDoc,tempData.color);
					setModalSubTitleCardColor(innerDoc,tempData.color);
					setModalPowerByColor(innerDoc,tempData.color);
					setModalPowerByLinekColor(innerDoc,tempData.color);
				},200)
			});
			setTimeout(() => {
				setInitModalBox({
					powerByText: '',
					titleModal: '',
					subtitleModal: '',
					purposes: [
						{ id: 1,title: 'test1', description: `x`, textMore: '', urlMore: '', hasAllow: false  },
						{ id: 2,title: 'test2', description: `These cookies allow us to count visits and traffic sources, so we can measure and improve the performance of our site. They help us know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies, we will not know when you have visited our site.`, textMore: '', urlMore: '', hasAllow: false },
						{ id: 3,title: 'test3', description: `These cookies allow us to count visits and traffic sources, so we can measure and improve the performance of our site. They help us know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies, we will not know when you have visited our site.`, textMore: '', urlMore: '', hasAllow: false },
					],
				});
			}, 200);
		}
		function onChangeColor(color) {
			tempData.color = color;
			var iframe = document.querySelector("#iframe_B");
			innerDoc = iframe.contentDocument || iframe.contentWindow.document;
			innerDoc.querySelector('.fd924-privacy-link').style.color = color;
			innerDoc.querySelector('.fd924-left-box').style.color = color;
			innerDoc.querySelector('.fd924-setting').style.color = color;

			var btnPrivacy = innerDoc.querySelector('.fd924-footer-btnconfirm')
			btnPrivacy.style.color = color;
			btnPrivacy.style.background = color;

			setCardTitleColor(innerDoc,tempData.color);
			setCardSubTitleColor(innerDoc,tempData.color)

		}

		</script>
  </body>
</html>
