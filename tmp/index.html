<!DOCTYPE html>
<html>
  <head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0;">
    <!--[htmlclean-protect]-->
    <!-- inject:css -->
    <!-- endinject -->
    <!--[/htmlclean-protect]-->
  </head>
  <body>
		<iframe id="iframe_B"  src="/preview.html" width="80%"  height="500px" onload="registerEvent(event)"></iframe>
    <!--[htmlclean-protect]-->
    <!-- inject:js -->
    <!-- endinject -->
    <!--[/htmlclean-protect]-->
		<div onclick="onChangeColor('red')">Red</div><div div onclick="onChangeColor('#7CFC00')" >Green</div>

	<script>
		tempData = {
			color: '',
		}

		function setCardTitleColor(innerDoc,color) {
			var boxsTitle = innerDoc.querySelectorAll('.fd924-text-title-card')
			if(boxsTitle && boxsTitle.length) boxsTitle.forEach((node) =>{ node.style.color = tempData.color; })
		}
		function setCardSubTitleColor(innerDoc,color) {
			var boxsSubTitle = innerDoc.querySelectorAll('.fd924-detail')
			if(boxsSubTitle && boxsSubTitle.length) boxsSubTitle.forEach((node) =>{ node.style.color = tempData.color; })
		}

		function setBtnRejctColor(innerDoc,bgColor, textColor) {
			var btnRight = innerDoc.querySelector('.fd924-btn-right')
			btnRight.style.color = textColor;
			btnRight.style.background = bgColor;
		}
		function setBtnConfirmColor(innerDoc,bgColor, textColor) {
			var btnLeft = innerDoc.querySelector('.fd924-btn-left')
			btnLeft.style.color = textColor;
			btnLeft.style.background = bgColor;
		}
		function setModalTitleCardColor(innerDoc,color) {
			innerDoc.querySelector('.fd924-text-title-header').style.color = color;
		}
		function setModalSubTitleCardColor(innerDoc,color) {
			innerDoc.querySelector('.fd924-text-privacy-text').style.color = color;
		}
		function setModalPowerByColor(innerDoc,color) {
			innerDoc.querySelector('.fd924-powerd-by').style.color = color;
		}
		function setModalPowerByLinekColor(innerDoc,color) {
			innerDoc.querySelector('.fd924-powerd-link').style.color = color;
		}
		function registerEvent(e) {
			var iframe = document.querySelector("#iframe_B");
			var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
			innerDoc.addEventListener("eventModel", (e) => {
				setTimeout(() => {
					setCardTitleColor(innerDoc,tempData.color);
					setCardSubTitleColor(innerDoc,tempData.color);
					setBtnRejctColor(innerDoc,tempData.color,tempData.color);
					setBtnConfirmColor(innerDoc,tempData.color,tempData.color);
					setModalTitleCardColor(innerDoc,tempData.color);
					setModalSubTitleCardColor(innerDoc,tempData.color);
					setModalPowerByColor(innerDoc,tempData.color);
					setModalPowerByLinekColor(innerDoc,tempData.color);
				},200)
			});
		}
		function onChangeColor(color) {
			tempData.color = color;
			var iframe = document.querySelector("#iframe_B");
			var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
			innerDoc.querySelector('.fd924-pricary-link').style.color = color;
			innerDoc.querySelector('.fd924-left-box').style.color = color;
			innerDoc.querySelector('.fd924-setting').style.color = color;

			var btnPrivacy = innerDoc.querySelector('.fd924-footer-btnconfirm')
			btnPrivacy.style.color = color;
			btnPrivacy.style.background = color;

			setCardTitleColor(innerDoc,tempData.color);
			setCardSubTitleColor(innerDoc,tempData.color)

		}
		// window.onload = (event) => {
		// 	var css = document.createElement('link');
		// 	css.rel = "stylesheet"
		// 	css.href = "style.css"
		// 	document.getElementsByTagName('head')[0].appendChild(css);
		// 	var script = document.createElement('script');


		// 	script.onload = function () {
		// 		CSent.inititail({
		// 			webkit: 'Google',
		// 			text: 'นโยบายด้านความปลอดภัย The Wise Work <a href="https://www.thewiseworks.com" ">รายละเอียดเพิ่มเติม</a>',
		// 			titleModal: 'Manage Consent Preferences',
		// 			priveryModal: 'Who you talk to and what you share should be up to you. We’re dedicated to making sure Messenger is a safe, private, and secure place for you to connect with the people who matter. To do this, we’ve built tools that allow you to stay in control, secure your account, and stay safe on the platform.',
		// 			purposes: [
		// 				{ id: 1,title: 'test1', description: `x`, textMore: '', urlMore: '', hasAllow: false  },
		// 				{ id: 2,title: 'test2', description: `These cookies allow us to count visits and traffic sources, so we can measure and improve the performance of our site. They help us know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies, we will not know when you have visited our site.`, textMore: '', urlMore: '', hasAllow: false },
		// 				{ id: 3,title: 'test3', description: `These cookies allow us to count visits and traffic sources, so we can measure and improve the performance of our site. They help us know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies, we will not know when you have visited our site.`, textMore: '', urlMore: '', hasAllow: false },
		// 			],
		// 		});
		// 	};
		// 	script.src = "script.js";
		// 	document.getElementsByTagName('head')[0].appendChild(script);
		// }
		
		</script>
  </body>
</html>
